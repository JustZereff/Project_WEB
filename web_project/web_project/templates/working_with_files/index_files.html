{% extends "base.html" %}

{% load static %}

{% block title %}
    Файли
{% endblock %}

{% block content %}
<div class="container custom-mt-10">
    <h2>Файли</h2>
    <div class="btn-group custom-bg-color" role="group" aria-label="Basic example">
        <a href="{% url 'index_files' %}?category=all" class="btn btn-secondary">Всі</a>
        {% for code, name in categories %}
        <a href="{% url 'index_files' %}?category={{ code }}" class="btn btn-secondary">{{ name }}</a>
        {% endfor %}
    </div>
    <!-- Кнопка завантаження файлу -->
    <a href="{% url 'file_upload' %}" class="btn btn-primary mt-2">Завантажити файл</a>
    <ul class="list-group mt-3">
    {% for file in files %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <a href="{{ file.file.url }}" target="_blank">{{ file.name }}</a> ({{ file.get_category_display }})
            <a href="{% url 'file_delete' file.pk %}" class="btn btn-danger btn-sm">Видалити</a>
        </li>
    {% endfor %}
    </ul>
    <div class="pagination">
        {% if files.has_previous %}
            <a href="?page=1&category={{ category }}" class="btn btn-light">Перша</a>
            <a href="?page={{ files.previous_page_number }}&category={{ category }}" class="btn btn-light">&laquo; Попередня</a>
        {% endif %}
        <span class="current">Сторінка {{ files.number }} із {{ files.paginator.num_pages }}.</span>
        {% if files.has_next %}
            <a href="?page={{ files.next_page_number }}&category={{ category }}" class="btn btn-light">Наступна &raquo;</a>
            <a href="?page={{ files.paginator.num_pages }}&category={{ category }}" class="btn btn-light">Остання</a>
        {% endif %}
    </div>
</div>
{% endblock %}
